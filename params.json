{
  "name": "Practical-machine-learning-course-project",
  "tagline": "Data Science specialisation from JHU on Coursera, Practical Machine Learning_ course project",
  "body": "#Purpose\r\nOne thing that people regularly do is quantify how much of a particular activity they do, but they rarely quantify how well they do it. In this project, the goal is to use data from accelerometers on the belt, forearm, arm, and dumbell of 6 participants.The goal of the project is to predict the manner in which they did the exercise. They were asked to perform barbell lifts correctly and incorrectly in 5 different ways. This is the \"classe\" variable in the training set.\r\nData\r\nThe training data for this project are available here:\r\nhttps://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv\r\nThe test data are available here:\r\nhttps://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv\r\nThe data for this project come from this source: http://groupware.les.inf.puc-rio.br/har\r\n\r\n#Overview and conclusion\r\nFirstly the data is cleaned by excluding variables not useful for prediction because they contain too much NA data or do not influence the exercise manner. During preprocessing correlated variable are excluded to avoid overfitting and working out too much input, preprocessing with PC gave 20% lower accuracy so isn`t used in the final model. Model fitting was done with boosting which is one of the most accurate methods and worked on my laptop much faster than random forest method. I also tryed regression trees, but the accuracy was very low in this case. During model fitting cross validation on 3 sets is applyed. The accuracy gained is 0.9551, the expected out of sample error is 0.0449. The result is reasonably good and allows to pass the project quiz, where 80% of right answers are needed. For reproducibility, I use set.seed.\r\n\r\n#Project flow\r\n##Used packages\r\n````\r\nlibrary(caret)\r\nlibrary(corrplot)\r\n````\r\n##Getting and cleaning data\r\nTraining and testing data was downloaded with RStudio functionality. \r\n````\r\n`pml-training` <- read.csv(\"/tmp/RtmpwNs13E/datafbc69d61669\")\r\n`pml-testing` <- read.csv(\"/tmp/RtmpwNs13E/datafbc134e2793\")\r\ntrain<-`pml-training`\r\nquiz<-`pml-testing`\r\n##training set: 19622 obs. of 160 var.\r\n````\r\nReplacing all empty and '#DIV/0!' entries with NA\r\n````\r\ntrain[train==\"'#DIV/0!'\"]<-NA\r\ntrain[train==\"\"]<-NA\r\n````\r\nDeleting all columns were are mostly NAs (more than 1/2 of all data)\r\n````\r\n### NAcols is a vector with those columns; default there are no NA\r\nNAcols <- rep(FALSE, ncol(train)) \r\n### Loop over the columns and flag those were are mostly NAs\r\nfor (i in 1:ncol(train)){\r\n  if (sum(is.na(train[,i]))>10000){\r\n    NAcols[i]<-T\r\n  }\r\n}\r\n###delete variables \r\n###now training set: 19622 obs. of 60 var.\r\ntrain2 <- train[,!NAcols]\r\n````\r\nDeleting columns which are not useful for prediction with: \"X\", \"user_name\", \"raw_timestamp_part_1\", \"raw_timestamp_part_2\", \"cvtd_timestamp\", \"new_window\", \"num_window\"   \r\n````\r\n### they are first 7 columns\r\ntrain1 <- train2[,-c(1:7)]\r\n###now training set: 19622 obs. of 53 var.\r\n````\r\n##Preprocessing\r\nDataPartition\r\n````\r\nset.seed(3433)\r\ninTrain<-createDataPartition(y=train3$classe, p=0.75, list=FALSE)\r\ntraining<-train1[inTrain,]\r\nvalidation<-train1[-inTrain,]\r\n```\r\nFinding and excluding correlated variables\r\n````\r\ncorMat <- cor(training[,-dim(training)[2]]) \r\ncorrplot(corMat, method = \"color\", type=\"lower\", order=\"hclust\", tl.cex = 0.65, tl.col=\"black\", tl.srt = 45)\r\n## Extract highly, r > 0.8, correlated variables and take them out of the training dataset\r\nhighlyCor <- findCorrelation(corMat, cutoff = 0.8)\r\ntraining1<- training[,-highlyCor]\r\nvalidation1<-validation[, -highlyCor]\r\n###now 41 var.s\r\n````\r\n\r\n##Model fitting\r\n````\r\nset.seed(134)\r\n##boosting\r\ntrainControl <- trainControl(method='cv', number = 3)\r\nmodel_gbm <- train(classe ~ ., data=training1, trControl=trainControl, method='gbm', verbose=FALSE)\r\n````\r\n##Validation\r\nApplying predictions\r\n````\r\npred_gbm <- predict(model_gbm , newdata=validation1)\r\n```\r\nExtraction of the confusion matrix to assess model validity\r\n````\r\nconfMat_gbm <- confusionMatrix(pred_gbm, validation1$classe)\r\nconfMat_gbm\r\n````\r\n#Prediction\r\n````\r\nquiz2 <- quiz[,!NAcols]\r\nquiz1 <- quiz2[,-c(1:7)]\r\nquiz3<-quiz1[, -highlyCor]\r\nanswers <- predict(model_gbm, newdata=quiz)\r\nprint(answers)\r\n````\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}